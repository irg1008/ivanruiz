---
import { ThemeToggler } from '@/components/ThemeToggler'
import { getTheme } from '@/pages/_services/theme.service'
import '@fontsource-variable/jost'
import { ViewTransitions } from 'astro:transitions'

const { title } = Astro.props
const theme = getTheme(Astro.cookies)
---

<html lang='en' class={theme}>
	<head>
		<meta charset='utf-8' />
		<link rel='icon' type='image/svg+xml' href='/favicon.svg' />
		<meta name='viewport' content='width=device-width' />
		<meta name='generator' content={Astro.generator} />
		<title>{title}</title>
		<ViewTransitions />
	</head>
	<body
		class='mx-auto min-h-screen w-full overflow-x-hidden bg-background text-foreground transition-colors duration-500'
	>
		<main transition:animate='fade'>
			<slot />
		</main>

		<span class='absolute left-0 top-0 m-4'>
			<ThemeToggler client:only='react' initialTheme={theme} />
		</span>

		<style is:global>
			@font-face {
				font-family: 'Phosphene';
				font-style: normal;
				font-weight: normal;
				src: url('/fonts/PhospheneFont-Regular.ttf') format('truetype');
			}

			html {
				font-family: 'Jost Variable', system-ui, sans-serif;
			}

			::view-transition-new(root),
			::view-transition-old(root) {
				animation: none;
			}
		</style>
	</body>
</html>
